# Azure Credentials for yamlforge
# Environment variable configuration - no Kubernetes secrets required

# =============================================================================
# REQUIRED ENVIRONMENT VARIABLES
# =============================================================================
# Set these environment variables before running yamlforge:

# Azure Service Principal Credentials
AZURE_CLIENT_ID: "your_azure_client_id"
AZURE_CLIENT_SECRET: "your_azure_client_secret"
AZURE_SUBSCRIPTION_ID: "your_azure_subscription_id"
AZURE_TENANT_ID: "your_azure_tenant_id"

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
#
# Step 1: Create Azure Service Principal
# az ad sp create-for-rbac --name "yamlforge-service-principal" \
#   --role contributor \
#   --scopes /subscriptions/YOUR_SUBSCRIPTION_ID
#
# Step 2: Extract Credentials from Output
# The command above will output:
# {
#   "appId": "12345678-1234-1234-1234-123456789012",
#   "displayName": "yamlforge-service-principal", 
#   "password": "your-client-secret",
#   "tenant": "87654321-4321-4321-4321-210987654321"
# }
#
# Step 3: Set Environment Variables
# export AZURE_CLIENT_ID="12345678-1234-1234-1234-123456789012"     # appId
# export AZURE_CLIENT_SECRET="your-client-secret"                   # password
# export AZURE_TENANT_ID="87654321-4321-4321-4321-210987654321"     # tenant
# export AZURE_SUBSCRIPTION_ID="your-subscription-id"
#
# Step 4: Run yamlforge (automatically uses environment variables)
# yamlforge convert my-infrastructure.yaml

# =============================================================================
# REQUIRED PERMISSIONS
# =============================================================================
# The Azure Service Principal should have the following permissions:
# - Contributor role on the subscription (for resource management)
# - DNS Zone Contributor (for DNS-01 challenges)
# - Virtual Machine Contributor (for VM management)
#
# To grant specific permissions:
# az role assignment create \
#   --assignee $AZURE_CLIENT_ID \
#   --role "DNS Zone Contributor" \
#   --scope /subscriptions/$AZURE_SUBSCRIPTION_ID/resourceGroups/your-dns-rg

# =============================================================================
# ALTERNATIVE: AZURE DNS SPECIFIC CREDENTIALS
# =============================================================================
# For DNS-01 challenges only, you can create a more limited service principal:
#
# az ad sp create-for-rbac --name "yamlforge-dns" \
#   --role "DNS Zone Contributor" \
#   --scopes /subscriptions/$AZURE_SUBSCRIPTION_ID/resourceGroups/your-dns-rg

# =============================================================================
# VALIDATION
# =============================================================================
# Verify your environment variables are set:
# echo "Azure Client ID: $AZURE_CLIENT_ID"
# echo "Azure Tenant ID: $AZURE_TENANT_ID" 
# echo "Azure Subscription ID: $AZURE_SUBSCRIPTION_ID"
# echo "Client Secret Set: $(if [ -n "$AZURE_CLIENT_SECRET" ]; then echo "Yes"; else echo "No"; fi)"
#
# Test authentication:
# az login --service-principal -u $AZURE_CLIENT_ID -p $AZURE_CLIENT_SECRET --tenant $AZURE_TENANT_ID 