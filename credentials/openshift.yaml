# OpenShift Credentials for yamlforge
# Environment variable configuration - no Kubernetes secrets required

# =============================================================================
# REQUIRED ENVIRONMENT VARIABLES
# =============================================================================
# Set these environment variables before running yamlforge:

# =============================================================================
# RED HAT OPENSHIFT CLUSTER MANAGER API (Required for ROSA/Managed OpenShift)
# =============================================================================
# For creating and managing ROSA clusters, OpenShift Dedicated, etc.
REDHAT_OPENSHIFT_TOKEN: "your_cluster_manager_api_token"
REDHAT_OPENSHIFT_URL: "https://api.openshift.com"     # Default Cluster Manager API URL

# =============================================================================
# OPENSHIFT CLUSTER CONNECTION (For existing cluster management)
# =============================================================================
# For connecting to existing OpenShift clusters
OPENSHIFT_CLUSTER_URL: "https://api.cluster.example.com:6443"
OPENSHIFT_TOKEN: "your_openshift_token"
OPENSHIFT_USERNAME: "your_username"          # Optional, if using username/password
OPENSHIFT_PASSWORD: "your_password"          # Optional, if using username/password
OPENSHIFT_NAMESPACE: "default"               # Optional, defaults to default

# Alternative: Kubeconfig (uncomment if preferred)
# OPENSHIFT_KUBECONFIG: "$(cat ~/.kube/config)"

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
#
# For ROSA/OpenShift Dedicated Deployment:
# ========================================
# Step 1: Get Red Hat OpenShift Cluster Manager API Token
# 1. Visit https://console.redhat.com/openshift/token
# 2. Log in with your Red Hat account
# 3. Copy the "Offline Token" (this is your API token)
#
# Step 2: Set Environment Variables for Cluster Manager
# export REDHAT_OPENSHIFT_TOKEN="your_offline_token_here"
# export REDHAT_OPENSHIFT_URL="https://api.openshift.com"  # Default
#
# Step 3: Run yamlforge (automatically creates ROSA clusters)
# yamlforge convert my-rosa-config.yaml
#
# For Existing Cluster Management:
# ===============================
# Step 1: Get OpenShift Cluster Information
# 1. Log into OpenShift Web Console
# 2. Click on your username (top right) → Copy login command
# 3. Click "Display Token" 
# 4. Copy the API token and server URL
#
# Step 2: Alternative - Extract from oc login
# oc login https://api.cluster.example.com:6443
# oc whoami --show-server  # Get cluster URL
# oc whoami --show-token   # Get authentication token
#
# Step 3: Set Environment Variables for Cluster Access
# export OPENSHIFT_CLUSTER_URL="https://api.cluster.example.com:6443"
# export OPENSHIFT_TOKEN="sha256~your-token-here"
# export OPENSHIFT_NAMESPACE="default"
#
# Step 4: Run yamlforge (manages existing cluster)
# yamlforge convert my-openshift-config.yaml

# =============================================================================
# AUTHENTICATION METHODS
# =============================================================================
# 
# Red Hat Cluster Manager API Token (for ROSA/Managed OpenShift):
# ================================================================
# 1. Red Hat Offline Token (Recommended for automation)
#    - Visit: https://console.redhat.com/openshift/token
#    - Copy "Offline Token" 
#    - Never expires, refreshes automatically
#    - Use: export REDHAT_OPENSHIFT_TOKEN="your_offline_token"
#
# 2. Red Hat Personal Access Token
#    - Visit: https://console.redhat.com/openshift/token
#    - Create a personal access token with specific permissions
#    - Expires based on configuration
#
# OpenShift Cluster Connection (for existing clusters):
# ====================================================
# Method 1: Service Account Token (Recommended for automation)
# 1. Create service account: oc create sa yamlforge-sa
# 2. Grant permissions: oc adm policy add-cluster-role-to-user cluster-admin -z yamlforge-sa
# 3. Get token: oc sa get-token yamlforge-sa
#
# Method 2: Personal Access Token
# 1. Log into OpenShift Web Console
# 2. User menu → Copy login command → Display Token
# 3. Copy the token value
#
# Method 3: Username/Password (Not recommended for automation)
# 1. Use your OpenShift username and password
# 2. Only works with certain identity providers
#
# Method 4: Kubeconfig File
# 1. Use existing kubeconfig from oc login
# 2. Export: export OPENSHIFT_KUBECONFIG="$(cat ~/.kube/config)"

# =============================================================================
# REQUIRED PERMISSIONS
# =============================================================================
# The OpenShift user/service account should have permissions for:
# - Creating and managing OpenShift operators
# - Managing namespaces/projects
# - Creating and managing applications
# - Managing certificates and secrets
# - Managing networking resources
#
# For full yamlforge functionality, cluster-admin role is recommended:
# oc adm policy add-cluster-role-to-user cluster-admin your-username
#
# For restricted permissions, grant specific roles:
# oc adm policy add-role-to-user admin your-username -n your-namespace

# =============================================================================
# OPENSHIFT CLUSTER TYPES
# =============================================================================
# This credential configuration works with:
# - ROSA (Red Hat OpenShift Service on AWS)
# - ARO (Azure Red Hat OpenShift)
# - OpenShift Dedicated
# - Self-managed OpenShift clusters
# - OpenShift Local (formerly CodeReady Containers)
# - OpenShift on IBM Cloud
# - OpenShift on Google Cloud

# =============================================================================
# VALIDATION
# =============================================================================
# Verify your environment variables are set:
#
# For Red Hat Cluster Manager API (ROSA/Managed OpenShift):
# echo "Red Hat OpenShift Token Set: $(if [ -n "$REDHAT_OPENSHIFT_TOKEN" ]; then echo "Yes"; else echo "No"; fi)"
# echo "Red Hat OpenShift URL: $REDHAT_OPENSHIFT_URL"
#
# For OpenShift Cluster Connection:
# echo "OpenShift Cluster URL: $OPENSHIFT_CLUSTER_URL"
# echo "OpenShift Namespace: $OPENSHIFT_NAMESPACE"
# echo "Cluster Token Set: $(if [ -n "$OPENSHIFT_TOKEN" ]; then echo "Yes"; else echo "No"; fi)"
#
# Test Red Hat Cluster Manager API connectivity:
# rosa whoami  # If you have rosa CLI installed
#
# Test cluster connectivity:
# oc login --token=$OPENSHIFT_TOKEN --server=$OPENSHIFT_CLUSTER_URL
# oc cluster-info
# oc get nodes 