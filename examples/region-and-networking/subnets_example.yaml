---
yamlforge:
  cloud_workspace:
    name: subnet-architecture-demo
    description: Subnet architecture demonstration
  instances:
  - name: prod-web-1
    provider: aws
    size: large
    image: RHEL9-latest
    region: us-east-1
    subnet: prod-web-subnet-1
    security_groups:
    - web-sg
    tags:
      environment: production
      tier: web
  - name: prod-web-2
    provider: aws
    size: large
    image: RHEL9-latest
    region: us-east-1
    subnet: prod-web-subnet-2
    security_groups:
    - web-sg
    tags:
      environment: production
      tier: web
  - name: prod-app-1
    provider: azure
    size: large
    image: RHEL9-latest
    region: eastus
    subnet: prod-app-subnet-1
    security_groups:
    - app-sg
    tags:
      environment: production
      tier: application
  - name: prod-app-2
    provider: azure
    size: large
    image: RHEL9-latest
    region: eastus
    subnet: prod-app-subnet-2
    security_groups:
    - app-sg
    tags:
      environment: production
      tier: application
  - name: prod-database-primary
    provider: gcp
    size: xlarge
    image: RHEL9-latest
    region: us-central1
    zone: us-central1-a
    subnet: prod-data-subnet-1
    security_groups:
    - data-sg
    tags:
      environment: production
      tier: database
      role: primary
  - name: prod-database-replica
    provider: gcp
    size: xlarge
    image: RHEL9-latest
    region: us-central1
    zone: us-central1-b
    subnet: prod-data-subnet-2
    security_groups:
    - data-sg
    tags:
      environment: production
      tier: database
      role: replica
  - name: staging-web
    provider: ibm_vpc
    size: medium
    image: RHEL9-latest
    region: us-south
    zone: us-south-1
    subnet: staging-web-subnet
    security_groups:
    - staging-sg
    tags:
      environment: staging
      tier: web
  - name: staging-app
    provider: ibm_vpc
    size: medium
    image: RHEL9-latest
    region: us-south
    zone: us-south-2
    subnet: staging-app-subnet
    security_groups:
    - staging-sg
    tags:
      environment: staging
      tier: application
  - name: dev-full-stack
    provider: cheapest
    cores: 4
    memory: 8192
    image: RHEL9-latest
    subnet: dev-subnet
    security_groups:
    - dev-sg
    tags:
      environment: development
      tier: all
      cost_optimized: 'true'
  - name: monitoring-server
    provider: aws
    size: medium
    image: RHEL9-latest
    region: us-east-1
    subnet: mgmt-subnet
    security_groups:
    - mgmt-sg
    tags:
      environment: management
      tier: infrastructure
      role: monitoring
  security_groups:
    web-sg:
      description: Web tier security group
      rules:
      - protocol: tcp
        port: 80
        source: 0.0.0.0/0
      - protocol: tcp
        port: 443
        source: 0.0.0.0/0
      - protocol: tcp
        port: 22
        source: 10.0.1.0/24
    app-sg:
      description: Application tier security group
      rules:
      - protocol: tcp
        port: 8080
        source: 10.1.1.0/24,10.1.2.0/24
      - protocol: tcp
        port: 8443
        source: 10.1.1.0/24,10.1.2.0/24
      - protocol: tcp
        port: 22
        source: 10.0.1.0/24
    data-sg:
      description: Database tier security group
      rules:
      - protocol: tcp
        port: 3306
        source: 10.1.10.0/24,10.1.11.0/24
      - protocol: tcp
        port: 5432
        source: 10.1.10.0/24,10.1.11.0/24
      - protocol: tcp
        port: 22
        source: 10.0.1.0/24
    staging-sg:
      description: Staging environment security group
      rules:
      - protocol: tcp
        port: 80
        source: 10.2.0.0/16
      - protocol: tcp
        port: 443
        source: 10.2.0.0/16
      - protocol: tcp
        port: 8080
        source: 10.2.0.0/16
      - protocol: tcp
        port: 22
        source: 10.0.1.0/24
    dev-sg:
      description: Development environment security group
      rules:
      - protocol: tcp
        port: 80
        source: 10.3.0.0/16
      - protocol: tcp
        port: 443
        source: 10.3.0.0/16
      - protocol: tcp
        port: 8080
        source: 10.3.0.0/16
      - protocol: tcp
        port: 22
        source: 10.0.1.0/24,10.3.0.0/16
    mgmt-sg:
      description: Management subnet security group
      rules:
      - protocol: tcp
        port: 22
        source: 10.0.0.0/8
      - protocol: tcp
        port: 443
        source: 10.0.0.0/8
      - protocol: tcp
        port: 9090
        source: 10.0.0.0/8
      - protocol: tcp
        port: 3000
        source: 10.0.0.0/8
  tags:
    network_architecture: multi_tier
    subnet_strategy: environment_based
    security_model: zero_trust
    high_availability: multi_az
    environment: enterprise
