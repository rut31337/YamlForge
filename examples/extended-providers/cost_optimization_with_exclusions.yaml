---
yamlforge:
  cloud_workspace:
    name: cost-optimization-with-policy
    description: Cost optimization while respecting organizational policies
    tags:
      compliance: enterprise-required
      security_policy: approved-clouds-only
  security_groups:
    web-tier:
      description: Web server access
      rules:
      - protocol: tcp
        port: 80
        source: 0.0.0.0/0
      - protocol: tcp
        port: 443
        source: 0.0.0.0/0
      - protocol: tcp
        port: 22
        source: 10.0.0.0/8
  instances:
  - name: unrestricted-cheapest
    provider: cheapest
    size: medium
    image: RHEL9-latest
    location: us-east-1_mapped
    security_groups:
    - web-tier
  - name: explicit-oci-server
    provider: oci
    size: medium
    image: RHEL9-latest
    region: us-ashburn-1
    security_groups:
    - web-tier
  - name: cheapest-gpu-workload
    provider: cheapest-gpu
    gpu_type: T4
    image: RHEL9-latest
    location: us-east-1_mapped
    security_groups:
    - web-tier
  - name: spec-based-cheapest
    provider: cheapest
    cores: 4
    memory: 8192
    image: RHEL9-latest
    location: us-east-1_mapped
    security_groups:
    - web-tier
  - name: web-server-1
    provider: cheapest
    size: small
    image: RHEL9-latest
    location: us-east-1_mapped
    security_groups:
    - web-tier
  - name: web-server-2
    provider: cheapest
    size: small
    image: RHEL9-latest
    location: us-west-2_mapped
    security_groups:
    - web-tier
  - name: database-server
    provider: cheapest
    size: large
    image: RHEL9-latest
    location: us-east-1_mapped
    security_groups:
    - web-tier
  tags:
    deployment_type: cost_optimization_with_policy
    cost_strategy: cheapest_with_exclusions
    environment: production
