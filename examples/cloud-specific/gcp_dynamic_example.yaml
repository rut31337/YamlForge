---
# GCP Dynamic Configuration Example
# Demonstrates dynamic GCP resource configuration and optimization

yamlforge:
  cloud_workspace:
    name: "gcp-dynamic-deployment"
    description: "GCP dynamic resource configuration example"

  instances:
    # Dynamic GCP instances with flexible sizing
    - name: "gcp-dynamic-web"
      provider: "gcp"
      size: "medium"
      image: "RHEL9-latest"
      region: "us-central1"
      zone: "us-central1-a"
      
    - name: "gcp-dynamic-app"
      provider: "gcp"
      cores: 4
      memory: 8192
      image: "RHEL8-latest"
      region: "us-west1"
      zone: "us-west1-b"

    # Preemptible instances for cost optimization
    - name: "gcp-preemptible-worker-1"
      provider: "gcp"
      size: "large"
      image: "Fedora-latest"
      region: "us-east1"
      zone: "us-east1-c"
      preemptible: true
      
    - name: "gcp-preemptible-worker-2"
      provider: "gcp"
      cores: 8
      memory: 16384
      image: "Fedora-latest"
      region: "europe-west1"
      zone: "europe-west1-d"
      preemptible: true

    # Spot instance alternative comparison
    - name: "cheapest-comparable"
      provider: "cheapest"
      cores: 8
      memory: 16384
      image: "Fedora-latest"
      tags:
        cost_comparison: "spot_vs_preemptible"

  # GCP-specific features
  security_groups:
    gcp-dynamic-sg:
      description: "Dynamic GCP security configuration"
      rules:
        - protocol: "tcp"
          port: 80
          source_ranges: ["0.0.0.0/0"]
        - protocol: "tcp"
          port: 443
          source_ranges: ["0.0.0.0/0"]
        - protocol: "tcp"
          port: 22
          source_ranges: ["10.0.0.0/8"]

  tags:
    cloud_provider: "gcp"
    deployment_type: "dynamic"
    cost_optimization: "preemptible"
    environment: "development" 